# 박승혁 피드백 - 위성자료 실무 활용 (2025-12-20)

## 대화 원문

**박승혁** (12:10 PM):
> 네 구름사진으로 기상자료변환은 잘 사용 안해요.

**박승혁** (12:11 PM):
> [위성 영상 이미지 공유 - 한반도 구름 영상]

**박승혁** (12:12 PM):
> 저는 Landsat 자료로 토양수분, 유출량 계산요

**나** (12:12 PM):
> 이거면 실무에 쓸 수 있는 수준인지 물어보는 질문이었어.

**박승혁** (12:12 PM):
> 위성자료로 토지이용변화 관측해요
> 실무에선

**박승혁** (12:13 PM):
> 물수지 분석에 활용해요.

**박승혁** (12:14 PM):
> 캐노피, 토양수분, 증발산량 o 산정해요

**나** (12:14 PM):
> 제가 하려던 코딩 모음요

---

## 핵심 인사이트

### 1. 현재 구현한 기능의 실무 활용도
- **GK-2A 구름 위성영상**: 실무에서 잘 사용 안함
- 기상자료 변환 용도로는 활용도 낮음

### 2. 실무에서 실제 사용하는 위성 자료
| 위성 | 용도 | 분석 항목 |
|------|------|-----------|
| **Landsat** | 토양수분 분석 | 토양수분 지수 계산 |
| **Landsat** | 수문 분석 | 유출량 계산 |
| **Landsat** | **물수지 분석** | 캐노피, 토양수분, 증발산량 산정 |
| **위성자료 전반** | 환경 모니터링 | 토지이용변화 관측 |

### 3. 박승혁의 실무 워크플로우
```
Landsat 위성자료
    ↓
┌───────────────────────────────────────┐
│         물수지 분석 (Water Balance)    │
├───────────────────────────────────────┤
│ • 캐노피 (Canopy) - 식생 피복 분석     │
│ • 토양수분 (Soil Moisture)            │
│ • 증발산량 (Evapotranspiration)       │
└───────────────────────────────────────┘
    ↓
유출량 계산, 토지이용변화 관측
```

### 4. 물수지 방정식과 위성자료 연계
```
P = ET + R + ΔS

P  : 강수량 (Precipitation) ← 기상 관측
ET : 증발산량 (Evapotranspiration) ← Landsat으로 산정
R  : 유출량 (Runoff) ← 계산 결과
ΔS : 저류량 변화 (Storage Change) ← 토양수분으로 추정
```

---

## 개발 방향 제안

### 단기 (현재 위성영상 기능 유지)
- GK-2A 구름 영상은 참고용/시각화용으로 유지
- 강수 예측, 기상 상황 파악에 보조적 활용

### 중장기 (실무 기능 추가 - 물수지 분석)

#### 1. Landsat 위성 자료 연동
- **데이터 소스**: USGS EarthExplorer, Google Earth Engine
- **활용**: 토양수분지수(NDWI, NDMI), 식생지수(NDVI)
- **주기**: Landsat-8/9는 16일 주기

#### 2. 캐노피 (식생 피복) 분석
```python
# NDVI (Normalized Difference Vegetation Index)
NDVI = (NIR - RED) / (NIR + RED)
# Landsat 8/9: (B5 - B4) / (B5 + B4)
```
- 식생 밀도, 건강도 파악
- 토지피복 분류의 기초

#### 3. 토양수분 분석 모듈
```python
# NDMI (Normalized Difference Moisture Index)
NDMI = (NIR - SWIR) / (NIR + SWIR)
# Landsat 8/9: (B5 - B6) / (B5 + B6)

# NDWI (Normalized Difference Water Index)
NDWI = (GREEN - NIR) / (GREEN + NIR)
# Landsat 8/9: (B3 - B5) / (B3 + B5)
```

#### 4. 증발산량 (ET) 산정
- **SEBAL/METRIC 알고리즘**: 에너지 수지 기반
- **간편법**: 식생지수 기반 ET 추정
```
ET = Kc × ET0
Kc (작물계수) ← NDVI로 추정
ET0 (기준증발산량) ← 기상자료
```

#### 5. 유출량 계산 연계
- 토양수분 → CN값 보정 → SCS 유출량 계산
- 위성 기반 토양수분으로 실시간 CN값 업데이트
- 물수지 방정식 적용: R = P - ET - ΔS

#### 6. 토지이용변화 모니터링
- 시계열 Landsat 영상 비교
- 불투수면적 변화 추적
- 유역 특성 변화 감지

---

## 후속 조치

- [ ] Landsat 자료 접근 방법 조사 (API, 다운로드)
- [ ] Google Earth Engine 연동 가능성 검토
- [ ] 토양수분지수 계산 알고리즘 구현
- [ ] 박승혁에게 구체적인 워크플로우 추가 질문

---

## 참고

- **Landsat**: NASA/USGS 공동 운영, 30m 해상도, 무료
- **GK-2A**: 기상청, 실시간 기상 관측용
- 두 위성은 용도가 다름 (기상 vs 지표면 분석)

---

## 추가: 한강홍수통제소 API (2025-12-20 확인)

### API 인증키
```
9E50673B-2D96-4436-BA86-756E81D3C738
```

### 테스트 완료된 API 엔드포인트

| 데이터 | URL | 응답 |
|--------|-----|------|
| 수위 (10분) | `https://api.hrfco.go.kr/{KEY}/waterlevel/list/10M.xml` | ✅ 성공 |
| 강수량 (10분) | `https://api.hrfco.go.kr/{KEY}/rainfall/list/10M.xml` | ✅ 성공 |
| 보 데이터 | `https://api.hrfco.go.kr/{KEY}/bo/list/10M.xml` | 미테스트 |
| 홍수예보 | `https://api.hrfco.go.kr/{KEY}/fldfct/list.xml` | 미테스트 |

### 응답 데이터 필드

**수위 (Waterlevel)**
```xml
<Waterlevel>
    <wl>1.53</wl>        <!-- 수위 (m) -->
    <fw>0.13</fw>        <!-- 유량 (m³/s) -->
    <wlobscd>1001602</wlobscd>  <!-- 관측소 코드 -->
    <ymdhm>202512201210</ymdhm> <!-- 관측시간 -->
</Waterlevel>
```

**강수량 (Rainfall)**
```xml
<Rainfall>
    <rf>0.0</rf>         <!-- 강수량 (mm) -->
    <rfobscd>10014010</rfobscd> <!-- 관측소 코드 -->
    <ymdhm>202512201210</ymdhm> <!-- 관측시간 -->
</Rainfall>
```

### 특정 관측소 조회 예시
```
# 한강대교 수위 (관측소: 1018683)
https://api.hrfco.go.kr/{KEY}/waterlevel/list/10M/1018683.xml

# 기간 조회 (2025-12-20 00:00 ~ 12:00)
https://api.hrfco.go.kr/{KEY}/waterlevel/list/10M/1018683/202512200000/202512201200.xml
```

### 물수지 분석 연계 가능성
- 실시간 수위/유량 → 유출량(R) 검증
- 실시간 강수량 → 강수량(P) 입력
- Landsat ET + HRFCO 강수/유출 → 완전한 물수지 분석
